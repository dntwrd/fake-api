from exceptions.hotels.hotel_search_exception import CityValidationException
from models import Hotel
from typing import Optional, List
from datetime import date
from validators import MethodValidator, DateSearchValidator, CityValidator

class HotelSearchService:
    def __init__(self, city: str, check_in: Optional[date], check_out: Optional[date], current_method: str, correct_method: str):
        self.city = city
        self.check_in = check_in
        self.check_out = check_out
        self.current_method = current_method
        self.correct_method = correct_method

    def search(self):
        CityValidator.validate(self.city)
        DateSearchValidator.validate(self.check_in, self.check_out)
        MethodValidator.validate(self.current_method, self.correct_method)

        # Пример отелей
        hotels = [
            Hotel(1, "Невский Берег #1", "Историческое здание и высокий сервис", "Москва", "Russia", 4, 3296),
            Hotel(2, "Сити Хаус #2", "Уютный номер и вид на парк", "Санкт-Петербург", "Russia", 5, 4014),
            Hotel(3, "Fontanka Inn #3", "Рядом с метро и музеями", "Санкт-Петербург", "Russia", None, 2713),
            Hotel(4, "Московский Мост #4", "Уютный номер и вид на парк", "Москва", "Russia", 5, 3895),
            Hotel(5, "Vintage Inn #5", "Для деловых поездок и семейного отдыха", "Санкт-Петербург", "Russia", None,
                  2922),
            Hotel(6, "Кутузов Палас #6", "Историческое здание и высокий сервис", "Москва", "Russia", 5, 3692),
            Hotel(7, "Nevsky Boutique #7", "Рядом с метро и музеями", "Москва", "Russia", 2, 4059),
            Hotel(8, "Lite Garden #8", "Современный отель у набережной", "Санкт-Петербург", "Russia", None, 1484),
            Hotel(9, "Гранд Отель Москва #9", "Современный отель у набережной", "Санкт-Петербург", "Russia", 2, 4260),
            Hotel(10, "Royal Moscow #10", "Тихое место с панорамным видом", "Москва", "Russia", 3, 4256),
            Hotel(11, "Sokolniki Inn #11", "Рядом с метро и музеями", "Москва", "Russia", 4, 4116),
            Hotel(12, "Vintage Inn #12", "Комфорт и роскошь в центре города", "Санкт-Петербург", "Russia", None, 3281),
            Hotel(13, "Sunny Place #13", "Комфорт и роскошь в центре города", "Москва", "Russia", 4, 4692),
            Hotel(14, "Golden Garden #14", "Апартаменты с кухней", "Санкт-Петербург", "Russia", 5, 3082),
            Hotel(15, "Галерея Отель #15", "Комфорт и роскошь в центре города", "Санкт-Петербург", "Russia", 4, 1380),
            Hotel(16, "Мост Отель #16", "Комфорт и роскошь в центре города", "Москва", "Russia", 4, 1875),
            Hotel(17, "Hermitage Suites #17", "Уютный номер и вид на парк", "Москва", "Russia", 3, 1483),
            Hotel(18, "Urban Star #18", "Современный отель у набережной", "Москва", "Russia", 2, 1876),
            Hotel(19, "Hermitage Suites #19", "Рядом с метро и музеями", "Москва", "Russia", None, 2031),
            Hotel(20, "Golden Garden #20", "Современный отель у набережной", "Москва", "Russia", 3, 4172),
            Hotel(21, "Old Town Stay #21", "Современный отель у набережной", "Санкт-Петербург", "Russia", 4, 4236),
            Hotel(22, "Capital Suites #22", "Апартаменты с кухней", "Москва", "Russia", 2, 3105),
            Hotel(23, "River View Hotel #23", "Просторные номера и ресторан", "Москва", "Russia", 5, 3848),
            Hotel(24, "Sunny Place #24", "Бюджетный отель с качественным сервисом", "Санкт-Петербург", "Russia", 4,
                  4440),
            Hotel(25, "City Comfort #25", "Историческое здание и высокий сервис", "Санкт-Петербург", "Russia", 4, 2001),
            Hotel(26, "Aurora Palace #26", "Апартаменты с кухней", "Москва", "Russia", 5, 1073),
            Hotel(27, "Невский Берег #27", "Уютный номер и вид на парк", "Санкт-Петербург", "Russia", 3, 3184),
            Hotel(28, "Тверская Премьер #28", "Рядом с метро и музеями", "Москва", "Russia", 5, 1881),
            Hotel(29, "Golden Garden #29", "Историческое здание и высокий сервис", "Москва", "Russia", 4, 4649),
            Hotel(30, "Сити Хаус #30", "Рядом с метро и музеями", "Москва", "Russia", 2, 2233),
            Hotel(31, "Northern Lights #31", "Историческое здание и высокий сервис", "Москва", "Russia", 2, 1684),
            Hotel(32, "Golden Garden #32", "Для деловых поездок и семейного отдыха", "Москва", "Russia", 3, 3714),
            Hotel(33, "Urban Star #33", "Современный отель у набережной", "Санкт-Петербург", "Russia", 4, 2255),
            Hotel(34, "Невский Берег #34", "Комфорт и роскошь в центре города", "Санкт-Петербург", "Russia", None, 1318),
            Hotel(35, "Парк Премьер #35", "Современный отель у набережной", "Москва", "Russia", 2, 2791),
            Hotel(36, "City Comfort #36", "Просторные номера и ресторан", "Санкт-Петербург", "Russia", 4, 2033),
            Hotel(37, "Отель Метрополь #37", "Комфорт и роскошь в центре города", "Москва", "Russia", 3, 2383),
            Hotel(38, "Fontanka Light #38", "Историческое здание и высокий сервис", "Санкт-Петербург", "Russia", 5,
                  2414),
            Hotel(39, "Heritage Place #39", "Бюджетный отель с качественным сервисом", "Санкт-Петербург", "Russia", 5,
                  3301),
            Hotel(40, "Hermitage Suites #40", "Современный отель у набережной", "Москва", "Russia", 4, 4074),
            Hotel(41, "Palace Line #41", "Уютный номер и вид на парк", "Москва", "Russia", None, 4152),
            Hotel(42, "Palace Line #42", "Просторные номера и ресторан", "Санкт-Петербург", "Russia", None, 4687),
            Hotel(43, "Fontanka Light #43", "Историческое здание и высокий сервис", "Москва", "Russia", 5, 3939),
            Hotel(44, "Palace Line #44", "Апартаменты с кухней", "Санкт-Петербург", "Russia", 5, 4672),
            Hotel(45, "Sokolniki Inn #45", "Тихое место с панорамным видом", "Санкт-Петербург", "Russia", 3, 4362),
            Hotel(46, "River View Hotel #46", "Историческое здание и высокий сервис", "Москва", "Russia", 4, 3676),
            Hotel(47, "Heritage Place #47", "Историческое здание и высокий сервис", "Москва", "Russia", 4, 4868),
            Hotel(48, "SkyLine Plaza #48", "Тихое место с панорамным видом", "Санкт-Петербург", "Russia", 5, 1904),
            Hotel(49, "Zamoskvorechye Classic #49", "Для деловых поездок и семейного отдыха", "Москва", "Russia", None,
                  3931),
            Hotel(50, "Art Hotel #50", "Для деловых поездок и семейного отдыха", "Москва", "Russia", 4, 1539),
            Hotel(51, "Royal Moscow #51", "Тихое место с панорамным видом", "Санкт-Петербург", "Russia", 3, 4323),
            Hotel(52, "Hermitage Suites #52", "Тихое место с панорамным видом", "Санкт-Петербург", "Russia", 2, 1244),
            Hotel(53, "Sunny Place #53", "Рядом с метро и музеями", "Санкт-Петербург", "Russia", 3, 1702),
            Hotel(54, "Botanic Residence #54", "Тихое место с панорамным видом", "Москва", "Russia", None, 3905),
            Hotel(55, "Art Hotel #55", "Современный отель у набережной", "Санкт-Петербург", "Russia", 5, 4628),
            Hotel(56, "River View Hotel #56", "Для деловых поездок и семейного отдыха", "Санкт-Петербург", "Russia", 4,
                  4679),
            Hotel(57, "Sokolniki Inn #57", "Комфорт и роскошь в центре города", "Москва", "Russia", 3, 1915),
            Hotel(58, "Urban Star #58", "Просторные номера и ресторан", "Санкт-Петербург", "Russia", 3, 1028),
            Hotel(59, "Capital Suites #59", "Современный отель у набережной", "Москва", "Russia", None, 4403),
            Hotel(60, "Capital Suites #60", "Историческое здание и высокий сервис", "Санкт-Петербург", "Russia", 2,
                  4201),
            Hotel(61, "Luxury Lounge #61", "Апартаменты с кухней", "Санкт-Петербург", "Russia", 3, 3633),
            Hotel(62, "Novotel City #62", "Апартаменты с кухней", "Санкт-Петербург", "Russia", 2, 3119),
            Hotel(63, "River View Hotel #63", "Рядом с метро и музеями", "Санкт-Петербург", "Russia", 2, 1195),
            Hotel(64, "Eastern Light #64", "Историческое здание и высокий сервис", "Санкт-Петербург", "Russia", 5, 2556),
            Hotel(65, "Fontanka Light #65", "Просторные номера и ресторан", "Санкт-Петербург", "Russia", 2, 1574),
            Hotel(66, "City Comfort #66", "Апартаменты с кухней", "Санкт-Петербург", "Russia", 2, 2821),
            Hotel(67, "Hermitage Suites #67", "Просторные номера и ресторан", "Санкт-Петербург", "Russia", 2, 4822),
            Hotel(68, "Aurora Palace #68", "Бюджетный отель с качественным сервисом", "Москва", "Russia", 3, 3439),
            Hotel(69, "Nevsky Boutique #69", "Тихое место с панорамным видом", "Москва", "Russia", None, 2103),
            Hotel(70, "Fontanka Inn #70", "Историческое здание и высокий сервис", "Москва", "Russia", 4, 2937),
            Hotel(71, "Metro City #71", "Историческое здание и высокий сервис", "Санкт-Петербург", "Russia", None, 2743),
            Hotel(72, "Тверская Премьер #72", "Просторные номера и ресторан", "Москва", "Russia", 4, 3274),
            Hotel(73, "SkyLine Plaza #73", "Рядом с метро и музеями", "Санкт-Петербург", "Russia", 2, 1779),
            Hotel(74, "Мост Отель #74", "Уютный номер и вид на парк", "Санкт-Петербург", "Russia", 5, 1644),
            Hotel(75, "Парк Премьер #75", "Уютный номер и вид на парк", "Санкт-Петербург", "Russia", 4, 4646),
            Hotel(76, "Гранд Отель Москва #76", "Современный отель у набережной", "Москва", "Russia", None, 2435),
            Hotel(77, "Hermitage Suites #77", "Апартаменты с кухней", "Санкт-Петербург", "Russia", 5, 4279),
            Hotel(78, "Heritage Place #78", "Уютный номер и вид на парк", "Москва", "Russia", 4, 4384),
            Hotel(79, "Art Hotel #79", "Просторные номера и ресторан", "Санкт-Петербург", "Russia", None, 1030),
            Hotel(80, "Eastern Light #80", "Историческое здание и высокий сервис", "Москва", "Russia", None, 1238),
            Hotel(81, "Old Town Stay #81", "Апартаменты с кухней", "Москва", "Russia", 3, 2905),
            Hotel(82, "SkyLine Plaza #82", "Бюджетный отель с качественным сервисом", "Москва", "Russia", 2, 1530),
            Hotel(83, "Галерея Отель #83", "Апартаменты с кухней", "Москва", "Russia", 5, 3999),
            Hotel(84, "Vintage Inn #84", "Тихое место с панорамным видом", "Санкт-Петербург", "Russia", 4, 3994),
            Hotel(85, "Palace Line #85", "Историческое здание и высокий сервис", "Москва", "Russia", None, 4981),
            Hotel(86, "Мост Отель #86", "Комфорт и роскошь в центре города", "Санкт-Петербург", "Russia", 5, 1758),
            Hotel(87, "Sokolniki Inn #87", "Тихое место с панорамным видом", "Санкт-Петербург", "Russia", 2, 2563),
            Hotel(88, "Парк Премьер #88", "Современный отель у набережной", "Санкт-Петербург", "Russia", 2, 2735),
            Hotel(89, "Fontanka Light #89", "Историческое здание и высокий сервис", "Москва", "Russia", 3, 4333),
            Hotel(90, "Sky Palace #90", "Рядом с метро и музеями", "Санкт-Петербург", "Russia", 5, 1895),
            Hotel(91, "Aurora Palace #91", "Бюджетный отель с качественным сервисом", "Москва", "Russia", 3, 2104),
            Hotel(92, "Сити Хаус #92", "Уютный номер и вид на парк", "Москва", "Russia", 4, 3649),
            Hotel(93, "Eastern Light #93", "Комфорт и роскошь в центре города", "Санкт-Петербург", "Russia", 5, 1483),
            Hotel(94, "Парк Премьер #94", "Апартаменты с кухней", "Санкт-Петербург", "Russia", None, 2829),
            Hotel(95, "Sunny Place #95", "Рядом с метро и музеями", "Санкт-Петербург", "Russia", None, 2950),
            Hotel(96, "Hermitage Suites #96", "Уютный номер и вид на парк", "Москва", "Russia", 2, 4037),
            Hotel(97, "Palace Line #97", "Просторные номера и ресторан", "Санкт-Петербург", "Russia", 4, 1657),
            Hotel(98, "Metro City #98", "Рядом с метро и музеями", "Санкт-Петербург", "Russia", 5, 3737),
            Hotel(99, "Imperial Garden #99", "Историческое здание и высокий сервис", "Москва", "Russia", 2, 2844),
            Hotel(100, "Пушкин Вест #100", "Комфорт и роскошь в центре города", "Санкт-Петербург", "Russia", None, 4045)
        ]

        return [hotel for hotel in hotels if hotel.city == self.city]